{{ `<!-- partials/navbar-main.html -->` | safeHTML }}
{{- $menu2 := .Site.Params.ui.navbar2 -}}
{{ $mclassTop := "" }}
{{ $mclassBot := "" }}
{{- if $menu2 -}}
{{ $mclassTop = "top attached" }}
{{ $mclassBot = "bottom attached" }}
{{- end -}}

<nav class="ui {{$mclassTop}} centered fluid wrapping menu">
  {{ $p := . -}}
  {{/* ---- iterative over menu items --------------------------------- */}}
  {{ range .Site.Menus.main -}}
  {{ $isActive := or ($p.IsMenuCurrent "main" .) ($p.HasMenuCurrent "main" .) -}}
  {{ with .Page }}{{ $isActive = or $isActive ( $.IsDescendant .) }}{{ end -}}
  {{ $active := cond ($isActive) "active" "" -}}
  {{ $href := "" }}
  {{ with .Page }}
  {{ $href = .RelPermalink }}{{else}} {{ $href = .URL | relLangURL }}
  {{ end }}
  {{ $pre := .Pre -}}
  {{ $post := .Post -}}
  {{ $url := urls.Parse .URL -}}
  {{ $baseurl := urls.Parse $.Site.Params.Baseurl -}}
  {{ $target :=""}}
  {{- if ne $url.Host $baseurl.Host }}{{ $target = "target=\"_blank\"" }}{{- end -}}
  <a class="{{ $active }} item" href="{{ $href }}" {{ $target }}>
    {{- with .Pre }}{{ $pre }}{{ end -}}
    {{- .Name -}}
    {{- with .Post }}{{ $post }}{{ end -}}
  </a>
  {{ end -}}
  {{/* ---- end of menu loop ---------------------------------------- */}}
  {{/* -------------------------------------------------------------- */}}
  {{/* ---- jumbo - see params.yaml --------------------------------- */}}
  {{ if .Site.Params.jumbo -}}
  <span class="item">{{ partial "navbar-jumbo-selector.html" . -}}</span>
  {{ end -}}
  {{/* */}}
  {{/* ---- languages ----------------------------------------------- */}}
  {{ if (gt (len .Site.Home.Translations) 0) -}}
  <a class="item">{{ partial "navbar-lang-selector.html" . -}}</a>
  {{ end -}}
  {{/* <a class="item">{{ partial "search-input.html" . }}</a> */}}
</nav>